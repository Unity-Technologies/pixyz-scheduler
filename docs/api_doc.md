# PiXYZ API Documentation

Welcome to the **PiXYZ API** documentation. This API enables interaction with PiXYZ services, allowing you to manage processes, jobs, outputs, and backend tasks.

<!-- TOC -->
* [PiXYZ API Documentation](#pixyz-api-documentation)
  * [General Information](#general-information)
  * [Endpoints](#endpoints)
    * [Root](#root)
      * [`GET /`](#get-)
    * [Processes](#processes)
      * [`GET /processes`](#get-processes)
      * [`GET /processes/{process_name}`](#get-processesprocess_name)
    * [Jobs](#jobs)
      * [`GET /jobs`](#get-jobs)
      * [`POST /jobs`](#post-jobs)
      * [`GET /jobs/{job_uuid}`](#get-jobsjob_uuid)
      * [`GET /jobs/{job_uuid}/details`](#get-jobsjob_uuiddetails)
      * [`GET /jobs/{job_uuid}/outputs`](#get-jobsjob_uuidoutputs)
      * [`GET /jobs/{job_uuid}/outputs/archive`](#get-jobsjob_uuidoutputsarchive)
      * [`GET /jobs/{job_uuid}/outputs/{file_path}`](#get-jobsjob_uuidoutputsfile_path)
    * [Backend](#backend)
      * [`GET /backend/get_task_meta/{job_uuid}`](#get-backendget_task_metajob_uuid)
    * [Development](#development)
      * [`POST /dev/callback`](#post-devcallback)
    * [Metrics](#metrics)
      * [`GET /metrics`](#get-metrics)
  * [Error Codes](#error-codes)
    * [Common Errors](#common-errors)
  * [Security](#security)
    * [API Key Header](#api-key-header)
<!-- TOC -->


## General Information

- **Title**: PiXYZ API
- **Version**: 1.0.5
- **Description**: API for managing PiXYZ processes and jobs.
- **Terms of Service**: [PiXYZ Terms](https://unity.com/products/pixyz)
- **Contact**: [#devs-pixyz](https://www.pixyz-software.com/)


## Endpoints

### Root

#### `GET /`
**Summary**: Retrieve the root of the API.

- **Responses**:
  - `200 OK`: Successful response.


### Processes

#### `GET /processes`
**Summary**: Retrieve the list of all available scheduler processes.

- **Responses**:
  - `200 OK`: Successful request.
  - `400 Bad Request`: Invalid parameters.
  - `401 Unauthorized`: Authentication required.
  - `404 Not Found`: Resource not found.
  - `425 Too Early`: Process ongoing and not completed.
  - `500 Internal Server Error`: Server-side error.


#### `GET /processes/{process_name}`
**Summary**: Retrieve documentation for a specific process.

- **Parameters**:
  - `process_name` (string, required): The name of the process.

- **Responses**:
  - `200 OK`: Successful response.
  - `422 Unprocessable Entity`: Validation error.


### Jobs

#### `GET /jobs`
**Summary**: List the statuses of all registered jobs.

- **Responses**:
  - `200 OK`: Successful request.
  - `400 Bad Request`: Invalid parameters.
  - `401 Unauthorized`: Authentication required.
  - `404 Not Found`: Resource not found.
  - `425 Too Early`: Process ongoing and not completed.
  - `500 Internal Server Error`: Server-side error.


#### `POST /jobs`
**Summary**: Create a new job.

- **Request Body**:
  - `process` (string): Process to execute.
  - `file` (binary/string): Input file.
  - `script` (binary): Script associated with the job.
  - `params` (string): Additional parameters.
  - `name` (string): Name of the job.
  - `config` (string): Configuration.

- **Responses**:
  - `200 OK`: Successful request.
  - `400 Bad Request`: Invalid parameters.
  - `401 Unauthorized`: Authentication required.
  - `404 Not Found`: Resource not found.
  - `425 Too Early`: Process ongoing and not completed.
  - `500 Internal Server Error`: Server-side error.
  - `422 Unprocessable Entity`: Validation error.


#### `GET /jobs/{job_uuid}`
**Summary**: Retrieve the status of a specific job.

- **Parameters**:
  - `job_uuid` (string, required): UUID of the job.

- **Responses**:
  - `200 OK`: Successful request.
  - `400 Bad Request`: Invalid parameters.
  - `401 Unauthorized`: Authentication required.
  - `404 Not Found`: Resource not found.
  - `425 Too Early`: Process ongoing and not completed.
  - `500 Internal Server Error`: Server-side error.
  - `422 Unprocessable Entity`: Validation error.


#### `GET /jobs/{job_uuid}/details`
**Summary**: Retrieve detailed information about a specific job.

- **Parameters**:
  - `job_uuid` (string, required): UUID of the job.

- **Responses**:
  - `200 OK`: Successful request.
  - `400 Bad Request`: Invalid parameters.
  - `401 Unauthorized`: Authentication required.
  - `404 Not Found`: Resource not found.
  - `425 Too Early`: Process ongoing and not completed.
  - `500 Internal Server Error`: Server-side error.
  - `422 Unprocessable Entity`: Validation error.


#### `GET /jobs/{job_uuid}/outputs`
**Summary**: List all output files generated by a specific job.

- **Parameters**:
  - `job_uuid` (string, required): UUID of the job.

- **Responses**:
  - `200 OK`: Successful request.
  - `400 Bad Request`: Invalid parameters.
  - `401 Unauthorized`: Authentication required.
  - `404 Not Found`: Resource not found.
  - `425 Too Early`: Process ongoing and not completed.
  - `500 Internal Server Error`: Server-side error.
  - `422 Unprocessable Entity`: Validation error.



#### `GET /jobs/{job_uuid}/outputs/archive`
**Summary**: Retrieve all output files as an archive.

- **Parameters**:
  - `job_uuid` (string, required): UUID of the job.

- **Responses**:
  - `200 OK`: Successful response.
  - `400 Bad Request`: Invalid parameters.
  - `401 Unauthorized`: Authentication required.
  - `404 Not Found`: Resource not found.
  - `425 Too Early`: Process ongoing and not completed.
  - `500 Internal Server Error`: Server-side error.
  - `422 Unprocessable Entity`: Validation error.



#### `GET /jobs/{job_uuid}/outputs/{file_path}`
**Summary**: Retrieve a specific output file.

- **Parameters**:
  - `job_uuid` (string, required): UUID of the job.
  - `file_path` (string, required): Path to the file.

- **Responses**:
  - `200 OK`: Successful response.
  - `400 Bad Request`: Invalid parameters.
  - `401 Unauthorized`: Authentication required.
  - `404 Not Found`: Resource not found.
  - `425 Too Early`: Process ongoing and not completed.
  - `500 Internal Server Error`: Server-side error.
  - `422 Unprocessable Entity`: Validation error.



### Backend

#### `GET /backend/get_task_meta/{job_uuid}`
**Summary**: Retrieve metadata for a backend task.

- **Parameters**:
  - `job_uuid` (string, required): UUID of the job.

- **Responses**:
  - `200 OK`: Successful request.
  - `400 Bad Request`: Invalid parameters.
  - `401 Unauthorized`: Authentication required.
  - `404 Not Found`: Resource not found.
  - `425 Too Early`: Process ongoing and not completed.
  - `500 Internal Server Error`: Server-side error.
  - `422 Unprocessable Entity`: Validation error.



### Development

#### `POST /dev/callback`
**Summary**: Helper endpoint to test callbacks (development only).

- **Request Body**:
  - `infos` (object): Items to be printed in the console.

- **Responses**:
  - `200 OK`: Successful response.
  - `422 Unprocessable Entity`: Validation error.

### Metrics

#### `GET /metrics`
**Summary**: Retrieve Prometheus metrics.

- **Responses**:
  - `200 OK`: Successful response.

## Error Codes

### Common Errors
| Code | Message                  | Description                                     |
|------|--------------------------|-------------------------------------------------|
| 400  | Bad Request              | Request parameters are invalid.                |
| 401  | Unauthorized             | Authentication is required.                    |
| 404  | Not Found                | The requested resource was not found.          |
| 425  | Too Early                | Process is ongoing and not completed.          |
| 500  | Internal Server Error    | Server-side error occurred.                    |
| 422  | Validation Error         | Validation error in input parameters.          |


## Security

### API Key Header
- **Type**: `apiKey`
- **Header Name**: `x-api-key`

